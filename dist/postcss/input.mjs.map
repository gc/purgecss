{
  "version": 3,
  "sources": ["../../src/postcss/css-syntax-error.js", "../../src/postcss/input.js"],
  "sourcesContent": ["export class CssSyntaxError extends Error {\r\n    constructor(message, line, column, source, file, plugin) {\r\n        super(message);\r\n        this.name = 'CssSyntaxError';\r\n        this.reason = message;\r\n        if (file) {\r\n            this.file = file;\r\n        }\r\n        if (source) {\r\n            this.source = source;\r\n        }\r\n        if (plugin) {\r\n            this.plugin = plugin;\r\n        }\r\n        if (typeof line !== 'undefined' && typeof column !== 'undefined') {\r\n            if (typeof line === 'number') {\r\n                this.line = line;\r\n                this.column = column;\r\n            }\r\n            else {\r\n                this.line = line.line;\r\n                this.column = line.column;\r\n                this.endLine = column.line;\r\n                this.endColumn = column.column;\r\n            }\r\n        }\r\n        this.setMessage();\r\n        if (Error.captureStackTrace) {\r\n            Error.captureStackTrace(this, CssSyntaxError);\r\n        }\r\n    }\r\n    setMessage() {\r\n        this.message = this.plugin ? this.plugin + ': ' : '';\r\n        this.message += this.file ? this.file : '<css input>';\r\n        if (typeof this.line !== 'undefined') {\r\n            this.message += ':' + this.line + ':' + this.column;\r\n        }\r\n        this.message += ': ' + this.reason;\r\n    }\r\n    showSourceCode() {\r\n        return '';\r\n    }\r\n    toString() {\r\n        let code = this.showSourceCode();\r\n        if (code) {\r\n            code = '\\n\\n' + code + '\\n';\r\n        }\r\n        return this.name + ': ' + this.message + code;\r\n    }\r\n}\r\n", "import { CssSyntaxError } from \"./css-syntax-error\";\r\nconst fromOffsetCache = Symbol('fromOffsetCache');\r\nexport class Input {\r\n    constructor(css, opts = {}) {\r\n        if (css === null ||\r\n            typeof css === 'undefined' ||\r\n            (typeof css === 'object' && !css.toString)) {\r\n            throw new Error(`PostCSS received ${css} instead of CSS string`);\r\n        }\r\n        this.css = css.toString();\r\n        if (this.css[0] === '\\uFEFF' || this.css[0] === '\\uFFFE') {\r\n            this.hasBOM = true;\r\n            this.css = this.css.slice(1);\r\n        }\r\n        else {\r\n            this.hasBOM = false;\r\n        }\r\n        if (this.map)\r\n            this.map.file = this.from;\r\n    }\r\n    error(message, line, column, opts = {}) {\r\n        let endColumn, endLine, result;\r\n        if (line && typeof line === 'object') {\r\n            const start = line;\r\n            const end = column;\r\n            if (typeof start.offset === 'number') {\r\n                const pos = this.fromOffset(start.offset);\r\n                line = pos.line;\r\n                column = pos.col;\r\n            }\r\n            else {\r\n                line = start.line;\r\n                column = start.column;\r\n            }\r\n            if (typeof end.offset === 'number') {\r\n                const pos = this.fromOffset(end.offset);\r\n                endLine = pos.line;\r\n                endColumn = pos.col;\r\n            }\r\n            else {\r\n                endLine = end.line;\r\n                endColumn = end.column;\r\n            }\r\n        }\r\n        else if (!column) {\r\n            const pos = this.fromOffset(line);\r\n            line = pos.line;\r\n            column = pos.col;\r\n        }\r\n        const origin = this.origin(line, column, endLine, endColumn);\r\n        if (origin) {\r\n            result = new CssSyntaxError(message, origin.endLine === undefined\r\n                ? origin.line\r\n                : { column: origin.column, line: origin.line }, origin.endLine === undefined\r\n                ? origin.column\r\n                : { column: origin.endColumn, line: origin.endLine }, origin.source, origin.file, opts.plugin);\r\n        }\r\n        else {\r\n            result = new CssSyntaxError(message, endLine === undefined ? line : { column, line }, endLine === undefined ? column : { column: endColumn, line: endLine }, this.css, this.file, opts.plugin);\r\n        }\r\n        result.input = { column, endColumn, endLine, line, source: this.css };\r\n        if (this.file) {\r\n            result.input.file = this.file;\r\n        }\r\n        return result;\r\n    }\r\n    fromOffset(offset) {\r\n        let lastLine, lineToIndex;\r\n        if (!this[fromOffsetCache]) {\r\n            const lines = this.css.split('\\n');\r\n            lineToIndex = new Array(lines.length);\r\n            let prevIndex = 0;\r\n            for (let i = 0, l = lines.length; i < l; i++) {\r\n                lineToIndex[i] = prevIndex;\r\n                prevIndex += lines[i].length + 1;\r\n            }\r\n            this[fromOffsetCache] = lineToIndex;\r\n        }\r\n        else {\r\n            lineToIndex = this[fromOffsetCache];\r\n        }\r\n        lastLine = lineToIndex[lineToIndex.length - 1];\r\n        let min = 0;\r\n        if (offset >= lastLine) {\r\n            min = lineToIndex.length - 1;\r\n        }\r\n        else {\r\n            let max = lineToIndex.length - 2;\r\n            let mid;\r\n            while (min < max) {\r\n                mid = min + ((max - min) >> 1);\r\n                if (offset < lineToIndex[mid]) {\r\n                    max = mid - 1;\r\n                }\r\n                else if (offset >= lineToIndex[mid + 1]) {\r\n                    min = mid + 1;\r\n                }\r\n                else {\r\n                    min = mid;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            col: offset - lineToIndex[min] + 1,\r\n            line: min + 1\r\n        };\r\n    }\r\n    origin(line, column, endLine, endColumn) {\r\n        if (!this.map)\r\n            return false;\r\n        const consumer = this.map.consumer();\r\n        const from = consumer.originalPositionFor({ column, line });\r\n        if (!from.source)\r\n            return false;\r\n        let to;\r\n        if (typeof endLine === 'number') {\r\n            to = consumer.originalPositionFor({ column: endColumn, line: endLine });\r\n        }\r\n        let fromUrl;\r\n        fromUrl = new URL(from.source, this.map.consumer().sourceRoot || pathToFileURL(this.map.mapFile));\r\n        const result = {\r\n            column: from.column,\r\n            endColumn: to && to.column,\r\n            endLine: to && to.line,\r\n            line: from.line,\r\n            url: fromUrl.toString()\r\n        };\r\n        const source = consumer.sourceContentFor(from.source);\r\n        if (source)\r\n            result.source = source;\r\n        return result;\r\n    }\r\n    toJSON() {\r\n        const json = {};\r\n        for (const name of ['hasBOM', 'css', 'file', 'id']) {\r\n            if (this[name] != null) {\r\n                json[name] = this[name];\r\n            }\r\n        }\r\n        if (this.map) {\r\n            json.map = { ...this.map };\r\n            if (json.map.consumerCache) {\r\n                json.map.consumerCache = undefined;\r\n            }\r\n        }\r\n        return json;\r\n    }\r\n    get from() {\r\n        return this.file || this.id;\r\n    }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}

{
  "version": 3,
  "sources": ["../src/ExtractorResultSets.ts"],
  "sourcesContent": ["import type { ExtractorResult } from \"./types\";\n\nfunction mergeSets(into: Set<string>, from?: string[] | Set<string>): void {\n  if (from) {\n    from.forEach(into.add, into);\n  }\n}\n\n/**\n * @public\n */\nclass ExtractorResultSets {\n  private undetermined = new Set<string>();\n  private attrNames = new Set<string>();\n  private attrValues = new Set<string>();\n  private classes = new Set<string>();\n  private ids = new Set<string>();\n  private tags = new Set<string>();\n\n  constructor(er: ExtractorResult) {\n    this.merge(er);\n  }\n\n  merge(that: ExtractorResult | ExtractorResultSets): this {\n    if (Array.isArray(that)) {\n      mergeSets(this.undetermined, that);\n    } else if (that instanceof ExtractorResultSets) {\n      mergeSets(this.undetermined, that.undetermined);\n      mergeSets(this.attrNames, that.attrNames);\n      mergeSets(this.attrValues, that.attrValues);\n      mergeSets(this.classes, that.classes);\n      mergeSets(this.ids, that.ids);\n      mergeSets(this.tags, that.tags);\n    } else {\n      // ExtractorResultDetailed:\n      mergeSets(this.undetermined, that.undetermined);\n      if (that.attributes) {\n        mergeSets(this.attrNames, that.attributes.names);\n        mergeSets(this.attrValues, that.attributes.values);\n      }\n      mergeSets(this.classes, that.classes);\n      mergeSets(this.ids, that.ids);\n      mergeSets(this.tags, that.tags);\n    }\n    return this;\n  }\n\n  hasAttrName(name: string): boolean {\n    return this.attrNames.has(name) || this.undetermined.has(name);\n  }\n\n  private someAttrValue(predicate: (value: string) => boolean): boolean {\n    for (const val of this.attrValues) {\n      if (predicate(val)) return true;\n    }\n    for (const val of this.undetermined) {\n      if (predicate(val)) return true;\n    }\n    return false;\n  }\n\n  hasAttrPrefix(prefix: string): boolean {\n    return this.someAttrValue((value) => value.startsWith(prefix));\n  }\n\n  hasAttrSuffix(suffix: string): boolean {\n    return this.someAttrValue((value) => value.endsWith(suffix));\n  }\n\n  hasAttrSubstr(substr: string): boolean {\n    const wordSubstr = substr.trim().split(\" \");\n    return wordSubstr.every((word) =>\n      this.someAttrValue((value) => value.includes(word)),\n    );\n  }\n\n  hasAttrValue(value: string): boolean {\n    return this.attrValues.has(value) || this.undetermined.has(value);\n  }\n\n  hasClass(name: string): boolean {\n    return this.classes.has(name) || this.undetermined.has(name);\n  }\n\n  hasId(id: string): boolean {\n    return this.ids.has(id) || this.undetermined.has(id);\n  }\n\n  hasTag(tag: string): boolean {\n    return this.tags.has(tag) || this.undetermined.has(tag);\n  }\n}\n\nexport default ExtractorResultSets;\n"],
  "mappings": ";;;;AAEA,SAAS,UAAU,MAAmB,MAAqC;AACzE,MAAI,MAAM;AACR,SAAK,QAAQ,KAAK,KAAK,IAAI;AAAA,EAC7B;AACF;AAJS;AAST,IAAM,sBAAN,MAAM,qBAAoB;AAAA,EAQxB,YAAY,IAAqB;AAPjC,SAAQ,eAAe,oBAAI,IAAY;AACvC,SAAQ,YAAY,oBAAI,IAAY;AACpC,SAAQ,aAAa,oBAAI,IAAY;AACrC,SAAQ,UAAU,oBAAI,IAAY;AAClC,SAAQ,MAAM,oBAAI,IAAY;AAC9B,SAAQ,OAAO,oBAAI,IAAY;AAG7B,SAAK,MAAM,EAAE;AAAA,EACf;AAAA,EArBF,OAW0B;AAAA;AAAA;AAAA,EAYxB,MAAM,MAAmD;AACvD,QAAI,MAAM,QAAQ,IAAI,GAAG;AACvB,gBAAU,KAAK,cAAc,IAAI;AAAA,IACnC,WAAW,gBAAgB,sBAAqB;AAC9C,gBAAU,KAAK,cAAc,KAAK,YAAY;AAC9C,gBAAU,KAAK,WAAW,KAAK,SAAS;AACxC,gBAAU,KAAK,YAAY,KAAK,UAAU;AAC1C,gBAAU,KAAK,SAAS,KAAK,OAAO;AACpC,gBAAU,KAAK,KAAK,KAAK,GAAG;AAC5B,gBAAU,KAAK,MAAM,KAAK,IAAI;AAAA,IAChC,OAAO;AAEL,gBAAU,KAAK,cAAc,KAAK,YAAY;AAC9C,UAAI,KAAK,YAAY;AACnB,kBAAU,KAAK,WAAW,KAAK,WAAW,KAAK;AAC/C,kBAAU,KAAK,YAAY,KAAK,WAAW,MAAM;AAAA,MACnD;AACA,gBAAU,KAAK,SAAS,KAAK,OAAO;AACpC,gBAAU,KAAK,KAAK,KAAK,GAAG;AAC5B,gBAAU,KAAK,MAAM,KAAK,IAAI;AAAA,IAChC;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,MAAuB;AACjC,WAAO,KAAK,UAAU,IAAI,IAAI,KAAK,KAAK,aAAa,IAAI,IAAI;AAAA,EAC/D;AAAA,EAEQ,cAAc,WAAgD;AACpE,eAAW,OAAO,KAAK,YAAY;AACjC,UAAI,UAAU,GAAG,EAAG,QAAO;AAAA,IAC7B;AACA,eAAW,OAAO,KAAK,cAAc;AACnC,UAAI,UAAU,GAAG,EAAG,QAAO;AAAA,IAC7B;AACA,WAAO;AAAA,EACT;AAAA,EAEA,cAAc,QAAyB;AACrC,WAAO,KAAK,cAAc,CAAC,UAAU,MAAM,WAAW,MAAM,CAAC;AAAA,EAC/D;AAAA,EAEA,cAAc,QAAyB;AACrC,WAAO,KAAK,cAAc,CAAC,UAAU,MAAM,SAAS,MAAM,CAAC;AAAA,EAC7D;AAAA,EAEA,cAAc,QAAyB;AACrC,UAAM,aAAa,OAAO,KAAK,EAAE,MAAM,GAAG;AAC1C,WAAO,WAAW;AAAA,MAAM,CAAC,SACvB,KAAK,cAAc,CAAC,UAAU,MAAM,SAAS,IAAI,CAAC;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,aAAa,OAAwB;AACnC,WAAO,KAAK,WAAW,IAAI,KAAK,KAAK,KAAK,aAAa,IAAI,KAAK;AAAA,EAClE;AAAA,EAEA,SAAS,MAAuB;AAC9B,WAAO,KAAK,QAAQ,IAAI,IAAI,KAAK,KAAK,aAAa,IAAI,IAAI;AAAA,EAC7D;AAAA,EAEA,MAAM,IAAqB;AACzB,WAAO,KAAK,IAAI,IAAI,EAAE,KAAK,KAAK,aAAa,IAAI,EAAE;AAAA,EACrD;AAAA,EAEA,OAAO,KAAsB;AAC3B,WAAO,KAAK,KAAK,IAAI,GAAG,KAAK,KAAK,aAAa,IAAI,GAAG;AAAA,EACxD;AACF;AAEA,IAAO,8BAAQ;",
  "names": []
}
